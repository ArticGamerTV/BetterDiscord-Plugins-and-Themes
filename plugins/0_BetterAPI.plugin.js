var BetterAPI=function(){};BetterAPI.prototype.getName=function(){return"BetterAPI"},BetterAPI.prototype.getDescription=function(){return"Enhances the BetterDiscord Plugin API."},BetterAPI.prototype.getVersion=function(){return"1.0"},BetterAPI.prototype.load=function(){},BetterAPI.prototype.start=function(){BetterAPI.prototype.loadCore(),BetterAPI.prototype.injectCSS(),BetterAPI.prototype.injectJS(),BetterAPI.prototype.loadAPI(),BetterAPI.enableTextSelection(),BetterAPI.enableAutoComplete(),BetterAPI.elemExists('a[data-reactid=".0.1.1.0.1.0.0.1.2.0"]',2)&&$('a[data-reactid=".0.1.1.0.1.0.0.1.2.0"]:first').parent().remove(),BetterAPI.prototype.overRides(),BetterAPI.prototype.autoInvite(),BetterAPI.prototype.inviteScraper()},BetterAPI.prototype.update=function(){},BetterAPI.prototype.getAuthor=function(){return"Bluscream"},BetterAPI.prototype.getSettingsPanel=function(){return $("#bdpmakebak").livequery(function(){$("#bdpmakebak").click(function(){BetterAPI.makeFile("bdbackup.txt",BetterAPI.getBackup())})}),$("#bdprestbak").livequery(function(){$("#bdprestbak").upload({name:"bdprestbakform",onComplete:function(a){alertify.success(""+a)}})}),$("#bdpreload").livequery(function(){$("#bdpreload").click(function(){window.location.reload()})}),"<b>"+BetterAPI.prototype.getName()+' Settings</b><br><br><br>Backup Localstorage:&nbsp;<button id="bdpmakebak">Backup</button><br>Restore Localstorage:&nbsp;<button id="bdprestbak">Restore</button><br>Reload Discord:&nbsp;<button id="bdpreload">Reload</button><br>'},BetterAPI.prototype.onSwitch=function(){localStorage.setItem("URL",window.location.href),BetterAPI.elemExists('a[data-reactid=".0.1.1.0.1.0.0.1.2.0"]',2)&&$('a[data-reactid=".0.1.1.0.1.0.0.1.2.0"]:first').parent().remove()},BetterAPI.prototype.overRides=function(){String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.contains=function(a){return-1!=this.indexOf(a)},load=function(){window.location.href="https://discordapp.com/channels/@me"},$.ajaxExternal=function(a){function g(a){return!d.test(a)&&/:\/\//.test(a)}var b=location.protocol,c=location.hostname,d=new RegExp(b+"//"+c),e="http"+(/^https/.test(b)?"s":"")+"://query.yahooapis.com/v1/public/yql?callback=?",f='select * from html where url="{URL}" and xpath="*"';return function(b){var c=b.url;return/get/i.test(b.type)&&!/json/i.test(b.dataType)&&g(c)&&(b.url=e,b.dataType="json",b.data={q:f.replace("{URL}",c+(b.data?(/\?/.test(c)?"&":"?")+$.param(b.data):"")),format:"xml"},!b.success&&b.complete&&(b.success=b.complete,delete b.complete),b.success=function(a){return function(b){a&&a.call(this,{responseText:b.results[0].replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi,"")},"success")}}(b.success)),a.apply(this,arguments)}}},BetterAPI.prototype.loadCore=function(){BetterAPI.isDebug=function(){return localStorage.getItem("debug")?"true"==localStorage.getItem("debug").toLowerCase()||"1"==localStorage.getItem("debug").toLowerCase()?!0:!1:(localStorage.setItem("debug","0"),!1)},BetterAPI.toggleDebug=function(){BetterAPI.isDebug()?localStorage.setItem("debug","0"):localStorage.setItem("debug","1")},BetterAPI.update=function(a,b){$.ajax({url:b,type:"GET",success:function(c){c.responseText;Core.prototype.alert("New Plugin update!","A new update is available for <b>"+a+"<b><br><br>Click <a onClick=\"BetterAPI.openURL('http://betterdiscord.net/ghdl?url="+b+'\')">here</a> to download the update.<br>Save the downloaded file to "'+process.env.APPDATA+'BetterDiscord\\plugins\\"')}})},BetterAPI.clearDir=function(a){$.jAlert({title:"Are you sure?",confirmQuestion:"This will remove all files in the '"+a+"' directory.<br><br>If you have not done it already, please create a backup of it if you made changes to its files!",theme:"yellow",size:"md",showAnimation:"fadeInUp",hideAnimation:"fadeOutDown",type:"confirm",onConfirm:function(a){a.preventDefault();require("fs");return console.log("removed"),!1}})},BetterAPI.DisableLogging=function(){console_log=console.log,console_info=console.info,console_warn=console.warn,console_error=console.error,console_debug=console.log,console_count=console.count,window.console.log=function(){},window.console.info=function(){},window.console.warn=function(){},window.console.error=function(){},window.console.debug=function(){},window.console.count=function(){}},BetterAPI.EnableLogging=function(){console_log&&(window.console.log=console_log,window.console.info=console_info,window.console.warn=console_warn,window.console.error=console_error,window.console.debug=console_debug,window.console.count=console_count)},BetterAPI.log=function(a,b,c,d){if("debug"==a||"dbg"==a||a){if(1!=debugging)return;switch(b.toLowerCase()){case"info":console.info("[BetterDiscord] "+c+": "+d);break;case"warn":console.warn("[BetterDiscord] "+c+": "+d);break;case"error":console.error("[BetterDiscord] "+c+": "+d);break;default:console.log("[BetterDiscord] "+c+": "+d)}}else switch(b){case"info":console.info("[BetterDiscord] "+c+": "+d);break;case"warn":console.warn("[BetterDiscord] "+c+": "+d);break;case"error":console.error("[BetterDiscord] "+c+": "+d);break;default:console.log("[BetterDiscord] "+c+": "+d)}},BetterAPI.appendTo=function(a,b){var c=$("head"),d=c.find(a+":last");d.length?d.after(b):c.append(b)},BetterAPI.enableTextSelection=function(){function a(){var a="*,p,div{user-select:text !important;-moz-user-select:text !important;-webkit-user-select:text !important;}";jQuery("head").append(jQuery("<style />").html(a));var b=function(){return!0};jQuery("*[onselectstart], *[ondragstart], *[oncontextmenu], #songLyricsDiv").unbind("contextmenu").unbind("selectstart").unbind("dragstart").unbind("mousedown").unbind("mouseup").unbind("click").attr("onselectstart",b).attr("oncontextmenu",b).attr("ondragstart",b)}function b(){window.jQuery?a():window.setTimeout(b,100)}if(window.jQuery)a();else{var c=document.createElement("script");c.setAttribute("src","http://code.jquery.com/jquery-1.9.1.min.js"),document.getElementsByTagName("body")[0].appendChild(c),b()}},BetterAPI.enableAutoComplete=function(){for(var a=function(a){for(var b=a.attributes.length,c=0;b>c;c++){var d=a.attributes[c];if("autocomplete"==d.name){d.value="on";break}}},b=document.getElementsByTagName("form"),c=0;c<b.length;c++){var d=b[c],e=d.elements;a(d);for(var f=0;f<e.length;f++)a(e[f])}},BetterAPI.enableButtons=function(){for(var a=document.getElementsByTagName("button"),b=0;b<a.length;b++)a[b].removeAttr("disabled")},BetterAPI.isNumber=function(a){return/^\d+$/.test(a)?!0:(BetterAPI.log(1,"error",BetterAPI.prototype.getName(),'"'+a+'" is not a valid number.'),!1)},BetterAPI.isUID=function(a){return a&&BetterAPI.isNumber(a)?(uid_length_min=16,uid_length_max=19,a=""+a,a.length>uid_length_min&&a.length<uid_length_max?!0:(BetterAPI.log(1,"error",BetterAPI.prototype.getName(),'"'+a+'" is not between '+uid_length_min+" and "+uid_length_max+" chars."),!1)):!1},BetterAPI.isInvite=function(a){if(BetterAPI.isEmpty(a))return!1;var b=["discordapp.com/invite/","discord.gg/"],c=a.toLowerCase(),d=!1;for(i=0;i<b.length;i++)c.contains(b[i])&&(d=!0);return d},BetterAPI.makeFile=function(a,b){for(var c=new ArrayBuffer(2*b.length),d=new Uint16Array(c),e=0,f=b.length;f>e;e++)d[e]=b.charCodeAt(e);window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,1048576,function(b){b.root.getFile(a,{create:!0},function(a){a.createWriter(function(b){var d=c,e=new Blob([d]);b.addEventListener("writeend",function(){location.href=a.toURL()},!1),b.write(e)},function(){})},function(){})},function(){})},BetterAPI.getBackup=function(){for(var c,a=0,b="";c=window.localStorage.key[a];a++)b=b+c+": "+window.localStorage.getItem(c)+"\n";return b},BetterAPI.openStatusPopup=function(){"129022124844253184"==BetterAPI.getCurrentServerID()?$.jAlert({iframe:"https://steamstat.us",size:$("#status").attr("size"),closeBtnAlt:!0,closeOnClick:!0}):$.jAlert({iframe:"https://status.discordapp.com",size:$("#status").attr("size"),closeBtnAlt:!0,closeOnClick:!0})},BetterAPI.addLocationBar=function(){$("#locationbar").length<=0&&$('div[data-reactid=".0.1.1.0.2.0"]').prepend('<input id="locationbar" style="width:80%;" value="'+window.location.href+'"/>')},BetterAPI.updateLocationBar=function(){1==$("#locationbar").length&&$("#locationbar").val(window.location.href)},BetterAPI.createCharCounter=function(){$(".charcount-display").length<=0&&($('textarea[data-reactid^=".0.1.1.0.2.1.0.1.$"]').charcount({maxLength:2e3,position:"before"}),$(".charcount-display").css("font-size","small"))},BetterAPI.visit=function(a){localStorage.setItem("lastURL",window.location.href),window.location.href=a},BetterAPI.openURL=function(a){require("shell").openExternal(a)},BetterAPI.bdAlert=function(a,b){Core.prototype.alert(a,b)},BetterAPI.elemExists=function(a,b){return b?$(a).length>b-1?!0:!1:$(a).length>0?!0:!1},BetterAPI.listJSFunctions=function(){var a=["top","window","location","external","chrome","document","inlineCSS","target","width","height","canvas","data","DOMURL","img","svg","ctx","url","w","a","speechSynthesis","webkitNotifications","localStorage","sessionStorage","applicationCache","webkitStorageInfo","indexedDB","webkitIndexedDB","crypto","CSS","performance","console","devicePixelRatio","styleMedia","parent","opener","frames","self","defaultstatus","defaultStatus","status","name","length","closed","pageYOffset","pageXOffset","scrollY","scrollX","screenTop","screenLeft","screenY","screenX","innerWidth","innerHeight","outerWidth","outerHeight","offscreenBuffering","frameElement","clientInformation","navigator","toolbar","statusbar","scrollbars","personalbar","menubar","locationbar","history","screen","postMessage","close","blur","focus","ondeviceorientation","ondevicemotion","onunload","onstorage","onresize","onpopstate","onpageshow","onpagehide","ononline","onoffline","onmessage","onhashchange","onbeforeunload","onwaiting","onvolumechange","ontimeupdate","onsuspend","onsubmit","onstalled","onshow","onselect","onseeking","onseeked","onscroll","onreset","onratechange","onprogress","onplaying","onplay","onpause","onmousewheel","onmouseup","onmouseover","onmouseout","onmousemove","onmouseleave","onmouseenter","onmousedown","onloadstart","onloadedmetadata","onloadeddata","onload","onkeyup","onkeypress","onkeydown","oninvalid","oninput","onfocus","onerror","onended","onemptied","ondurationchange","ondrop","ondragstart","ondragover","ondragleave","ondragenter","ondragend","ondrag","ondblclick","oncuechange","oncontextmenu","onclose","onclick","onchange","oncanplaythrough","oncanplay","oncancel","onblur","onabort","onwheel","onwebkittransitionend","onwebkitanimationstart","onwebkitanimationiteration","onwebkitanimationend","ontransitionend","onsearch","getSelection","print","stop","open","showModalDialog","alert","confirm","prompt","find","scrollBy","scrollTo","scroll","moveBy","moveTo","resizeBy","resizeTo","matchMedia","requestAnimationFrame","cancelAnimationFrame","webkitRequestAnimationFrame","webkitCancelAnimationFrame","webkitCancelRequestAnimationFrame","captureEvents","releaseEvents","atob","btoa","setTimeout","clearTimeout","setInterval","clearInterval","TEMPORARY","PERSISTENT","getComputedStyle","getMatchedCSSRules","webkitConvertPointFromPageToNode","webkitConvertPointFromNodeToPage","webkitRequestFileSystem","webkitResolveLocalFileSystemURL","openDatabase","addEventListener","removeEventListener","dispatchEvent"],b={};for(var c in window)-1==a.indexOf(c)&&(b[c]=window[c]);window.$appSpecificGlobals=b,console.log(window.$appSpecificGlobals)},BetterAPI.checkJSVersion=function(){var a='<script class="JSTest" type="text/javascript">var jsver = 1.0;</script>';for(i=1;i<10;i++)a+='<script class="JSTest" language="Javascript1.'+i+'">var jsver = 1.'+i+";</script>";return $("body").append(a),$(".JSTest").remove(),jsver},BetterAPI.getVersions=function(){},BetterAPI.openSettings=function(){$(".btn-settings").click()},BetterAPI.isEmpty=function(a){return a&&"undefined"!=typeof a&&null!==typeof a&&"null"!=a&&"undefined"!=a&&"empty"!=a&&"-1"!=a?!1:!0},BetterAPI.loadSettings=function(a,b){return BetterAPI.isEmpty(localStorage.getItem(a))&&localStorage.setItem(a,JSON.stringify(b)),JSON.parse(localStorage.getItem(a))},BetterAPI.saveSettings=function(a,b){localStorage.setItem(a,JSON.stringify(b))},BetterAPI.fileExists=function(a){var b=require("fs");b.access(a,b.F_OK,function(b){return b?(BetterAPI.debugging()&&console.log("'"+a+"' does NOT exist."),!1):(BetterAPI.debugging()&&console.log("'"+a+"' does exists."),!0)})},BetterAPI.getFileHash=function(a){var b=require("fs"),c=require("crypto"),d=b.createReadStream(a),e=c.createHash("sha1");e.setEncoding("hex"),d.on("end",function(){return e.end(),console.log(e.read()),e.read()}),d.pipe(e)},BetterAPI.npm=function(a,b){require("child_process").exec("npm install --save "+a,{cwd:saveDir},function(c,d,e){BetterAPI.isDebug()&&console.log(c,d,e),console.info("NPM Module '"+a+"' is ready."),b&&b()})},BetterAPI.requireCSS=function(a,b){BetterAPI.elemExists($('link[href="'+a+'"]'))||(b?BetterAPI.elemExists($("#"+b))||$("<link/>",{type:"text/css",rel:"stylesheet",href:a,id:b}).appendTo($("head")):$("<link/>",{type:"text/css",rel:"stylesheet",href:a}).appendTo($("head")))},BetterAPI.requireJS=function(href,elemID,func,callback){if(!BetterAPI.elemExists($('script[src="'+href+'"]')))if(elemID)if(BetterAPI.elemExists($("#"+elemID)))BetterAPI.isDebug()&&console.log("Not appending "+elemID+" because it's element is already defined.");else if(func){try{eval(func),BetterAPI.isDebug()&&console.log("Not appending "+elemID+" because it's function is already defined.")}catch(e){$("<script/>",{type:"text/javascript",src:href,id:elemID}).appendTo($("head"))}if(callback)try{eval(callback)}catch(e){}}else $("<script/>",{type:"text/javascript",src:href,id:elemID}).appendTo($("head"));else if(func){try{eval(func),BetterAPI.isDebug()&&console.log("Not appending script because its function is already defined.")}catch(e){$("<script/>",{type:"text/javascript",src:href}).appendTo($("head"))}if(callback)try{eval(callback)}catch(e){}}else $("<script/>",{type:"text/javascript",src:href}).appendTo($("head"))}},BetterAPI.prototype.injectCSS=function(){BetterAPI.requireCSS("https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.0-beta.1/jquery-ui.min.css","JQueryUICSS"),BetterAPI.requireCSS("https://cdn.rawgit.com/VersatilityWerks/jAlert/master/src/jAlert-v3.css","jAlertCSS"),BetterAPI.requireCSS("https://cdn.jsdelivr.net/alertifyjs/1.6.1/css/alertify.min.css"),BetterAPI.requireCSS("https://cdn.jsdelivr.net/alertifyjs/1.6.1/css/themes/default.min.css")},BetterAPI.prototype.injectJS=function(){BetterAPI.requireJS("https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.min.js","JQueryJS","$()"),BetterAPI.requireJS("https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.0-beta.1/jquery-ui.min.js","JQueryUIJS","$().draggable();"),BetterAPI.requireJS("https://cdn.rawgit.com/carhartl/jquery-cookie/master/src/jquery.cookie.js","JQCookieJS","$.cookie()"),BetterAPI.requireJS("https://cdn.rawgit.com/brandonaaron/livequery/1.1.1/jquery.livequery.js","LiveQueryJS"),BetterAPI.requireJS("https://cdn.rawgit.com/VersatilityWerks/jAlert/master/src/jAlert-v3.min.js","JAlertJS"),BetterAPI.requireJS("https://cdn.rawgit.com/VersatilityWerks/jAlert/master/src/jAlert-functions.min.js","JAlertfuncJS"),BetterAPI.requireJS("https://cdn.jsdelivr.net/alertifyjs/1.6.1/alertify.min.js","AlertifyJS","alertify"),BetterAPI.requireJS("https://cdn.rawgit.com/craigmccoy/jquery-charcount/master/jquery.charcount.min.js","CharcountJS"),BetterAPI.requireJS("https://cdnjs.cloudflare.com/ajax/libs/dragula/3.6.3/dragula.min.js","DragulaJS"),BetterAPI.requireJS("https://cdn.rawgit.com/jberryman/dilly.js/master/dilly.js","withDelayJS","withDelay"),BetterAPI.requireJS("https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/moment.min.js","momentJS","moment")},BetterAPI.prototype.loadAPI=function(){BetterAPI.getCurrentServerName=function(){try{return $(document).find("[data-reactid='.0.1.1.0.1.0.0.0.0']").text()}catch(a){return!1}},BetterAPI.getCurrentServerID=function(){var a=window.location.pathname;try{return a.match(/\d+/)[0]}catch(b){return!1}},BetterAPI.getCurrentTextChannelName=function(){try{return $(".active .channel-name").text()}catch(a){return!1}},BetterAPI.getCurrentTextChannelID=function(){var a=window.location.pathname;try{return a.match(/\d+$/)}catch(b){return!1}},BetterAPI.getCurrentVoiceChannelName=function(){if(!$(".audio .channel-name").text())return null;try{return $(".audio .channel-name").text()}catch(a){return!1}},BetterAPI.getOwnID=function(){if(void 0!==$(".account>.avatar-small").css("background-image")){var a=$(".account .avatar-small").css("background-image").match(/\d+/);return BetterAPI.isUID(a)?a[0]:(BetterAPI.log(1,"error",BetterAPI.prototype.getName(),"Can't get own UID."),null)}},BetterAPI.getOwnDiscriminator=function(){return $('span[data-reactid=".0.1.1.0.1.2.1.1.1"]').text()},BetterAPI.getOwnName=function(){return""+$(".account").find(".username").text()},BetterAPI.getOwnAvatarID=function(){var a=""+$(".account .avatar-small").css("background-image");return a.split("/").pop(-1).slice(0,-5)},BetterAPI.getOwnAvatarURL=function(){var a=""+$(".account .avatar-small").css("background-image");return a.substring(4,a.length-1)},BetterAPI.userCount=function(){return num=0,[].slice.call($('span[data-reactid^=".0.1.1.0.2.1.1.0.0.1"][data-reactid$=".2"]')).forEach(function(a){num+=parseInt($(a).text())}),num},BetterAPI.onlineUserCount=function(){return parseInt($('span[data-reactid$="$online.2"]').text())},BetterAPI.offlineUserCount=function(){return parseInt($('span[data-reactid$="$offline.2').text())},BetterAPI.serverCount=function(){return $('li[data-reactid*=".0.1.1.0.0.0.4:"]').length},BetterAPI.getUserIdByName=function(a){for(var b="",c="",d=$(".member-username"),e=0;e<d.length;e++){var f=$(d[e]);if(f.text()==a){var g=f.closest(".member").find(".avatar-small").css("background-image");c=g.match(/\d+/),b=f.text();break}}return""===c&&[].slice.call($(".message-group")).forEach(function(d){var e=$(d).find(".user-name"),f=e.text(),g=$(e).parents(".comment"),h=$(g).prev(),i=$(h).css("background-image");a==f&&(c=i.match(/\d+/),b=e.text())}),c=""+c,BetterAPI.isUID(c)?(BetterAPI.log(1,"log",BetterAPI.prototype.getName(),'UID of "'+b+'" is "'+c+'" with a length of '+c.length+" chars."),c):null},BetterAPI.getUserNameById=function(a){for(var b="",c=$(".avatar-small"),d=0;d<c.length;d++)user=$(c[d]),url=user.css("background-image"),a==url.match(/\d+/)&&(b=user.parent().find(".member-username").text());if(""===b){c=$(".avatar-large");for(var d=0;d<c.length;d++)user=$(c[d]),url=user.css("background-image"),a==url.match(/\d+/)&&(b=user.parent().find(".member-username").text())}return""!==b?b:null},BetterAPI.getUserGameByID=function(a){for(var b="",c=$(".avatar-small"),d=0;d<c.length;d++)user=$(c[d]),url=user.css("background-image"),a==url.match(/\d+/)&&(b=user.parent().find(".member-game").text().replace("Playing ",""));if(""===b){c=$(".avatar-large");for(var d=0;d<c.length;d++)user=$(c[d]),url=user.css("background-image"),a==url.match(/\d+/)&&(b=user.parent().find(".member-game").text().replace("Playing ",""))}return""!==b?b:null},BetterAPI.getUserAvatarID=function(a){var b=null;return $(".avatar-small").each(function(){return url=$(this).css("background-image"),a==url.match(/\d+/)?(b=url.split("/").pop(-1).slice(0,-5),!1):void 0}),b||$(".avatar-large").each(function(){return url=$(this).css("background-image"),a==url.match(/\d+/)?(b=url.split("/").pop(-1).slice(0,-5),!1):void 0}),b},BetterAPI.getUserAvatarIDbyName=function(a){var b=null;return $(".avatar-small").each(function(){var c=$(this).next().children().text();if(a==c){var d=$(this).css("background-image");return b=d.split("/").pop(-1).slice(0,-5),!1}}),b||$(".avatar-large").each(function(){var c=$(this).next().find(".user-name").text();if(a==c){var d=$(this).css("background-image");return b=d.split("/").pop(-1).slice(0,-5),!1}}),b},BetterAPI.getAvatarURLbyName=function(a){var b=null;return $(".avatar-small").each(function(){var c=$(this).next().children().text();if(a==c){var d=$(this).css("background-image");b=d.substring(4,d.length-1)}}),b||$(".avatar-large").each(function(){var c=$(this).next().find(".user-name").text();if(a==c){var d=$(this).css("background-image");b=d.substring(4,d.length-1)}}),b},BetterAPI.getAvatarURL=function(a){var b=null;return $(".avatar-small").each(function(){var c=$(this).css("background-image");return a==c.match(/\d+/)?(b=c.substring(4,c.length-1),!1):void 0}),b||$(".avatar-large").each(function(){var c=$(this).css("background-image");return a==c.match(/\d+/)?(b=c.substring(4,c.length-1),!1):void 0}),b},BetterAPI.getClientList=function(){for(var a={},b=[],c=$(".user-name, .member-username"),d=0;d<c.length;d++){var e=$(c[d]).text(),f=BetterAPI.getUserIdByName(e),g=BetterAPI.getUserAvatarIDbyName(e),h=BetterAPI.getAvatarURLbyName(e),i=BetterAPI.getUserGameByID(f);a.clients=b;var j={name:e,uid:f,avatarID:g,avatarURL:h,game:i};a.clients.push(j)}return BetterAPI.log(1,"log",BetterAPI.prototype.getName(),"Got clientlist of #"+BetterAPI.getCurrentTextChannelName()+' in "'+BetterAPI.getCurrentServerName()+'" with a total of '+b.length+" clients"),a.clients},BetterAPI.getClientNameList=function(){for(var a=[],b=$(".user-name, .member-username"),c=0;c<b.length;c++){var d=$(b[c]).text();-1==a.indexOf(d)&&a.push(d)}return a},BetterAPI.getClientUIDList=function(){for(var a=[],b=$(".avatar-small, .avatar-large"),c=0;c<b.length;c++){var d=$(b[c]).css("background-image"),e=""+d.match(/\d+/);BetterAPI.isUID(e)&&-1==a.indexOf(e)&&a.push(e)}return a},BetterAPI.onlineFriendsCount=function(){return $(".friends-online").text().replace(" Online","")},BetterAPI.addUserLabel=function(a,b,c){a=a.startsWith("#")?a.substring(1):a,$("#"+a).length<=0&&$(".user-popout-options").prepend('<div id="'+a+'"class="roles-container"><span class="label">'+b+'</span><ul class="member-roles">'+c+"</ul></div>"),$(a).length=1},BetterAPI.addUserLink=function(a,b,c,d,e,f,g){a=a.startsWith("#")?a.substring(1):a,$("#"+a).length<=0&&("0"==e||"0"==f||"0"==g?$(".user-popout-options").append('<div id="'+a+'" style="font-size:x-small;padding-top:5px;"><a href="'+c+'" id="'+b+'">'+d+"</a>"):$(".user-popout-options").append('<div id="'+a+'" style="font-size:x-small;padding-top:5px;"><a href="'+c+'" id="'+b+'">'+d+'</a><a href="'+f+'" id="'+e+'" style="float:right">'+g+"</a></div>"))},BetterAPI.addLink=function(a,b,c,d){a=a.startsWith("#")?a.substring(1):a,$("#"+a).length<=0&&$('ul[data-reactid=".0.1.1.0.1.3"]').append('<li id="'+a+'" href="'+c+'" size="'+d+'"><a >'+b+"</a></li>")},BetterAPI.addUserButton=function(a,b,c){b=b.startsWith("#")?b.substring(1):b,$("#"+b).length<=0&&$(".user-popout-options").append('<button class="'+a+'" id="'+b+'">'+c+"</button>")},BetterAPI.addServerButton=function(a,b,c){"before"==c?(a=a.startsWith("#")?a.substring(1):a,$("#"+a).length<=0&&$('ul[data-reactid=".0.1.1.0.1.0.0.1"]').prepend('<li id="'+a+'"><a>'+b+"</a></li>")):(a=a.startsWith("#")?a.substring(1):a,$("#"+a).length<=0&&$('ul[data-reactid=".0.1.1.0.1.0.0.1"]').append('<li id="'+a+'"><a>'+b+"</a></li>"))},BetterAPI.changeUserInfo=function(a,b){$.ajax({method:"patch",url:"https://discordapp.com/api/users/@me",headers:{authorization:localStorage.token.match(/\"(.+)\"/)[1]},data:{avatar:b,username:a}})},b64toBlob=function(a){for(var b=a.split(","),c=b[0].substr(5).split(";")[0],d=b[1],e=atob(d),f=new Array(e.length),g=0;g<e.length;g++)f[g]=e.charCodeAt(g);var h=new Uint8Array(f),i=new Blob([h],{type:c});return i},BetterAPI.sendImage=function(a,b,c){var d=b64toBlob(b),e=new FormData;e.append("file",d,a),$.ajax({type:"POST",url:"https://discordapp.com/api/channels/"+c+"/messages",headers:{authorization:localStorage.token.slice(1,-1)},data:e,processData:!1,contentType:!1})},BetterAPI.bulkUpload=function(){var a=setInterval(function(){BetterAPI.elemExists(".upload-modal")?$(".button-primary:not(.submitall)").click():clearInterval(a)},500)}},BetterAPI.prototype.loadEvents=function(){$(".guilds-error").livequery(function(){$(".guilds-error").removeAttr("href"),$(".guilds-error").click(function(){BetterAPI.openStatusPopup(),lastVisibleAlert=null})})},BetterAPI.prototype.unloadEvents=function(){$(".guilds-error").off(),$("#bdpmakebak").off(),$("#bdprestbak").off(),$('button[type="submit"]').off()},BetterAPI.prototype.loadAcc=function(){$('button[type="submit"]').livequery(function(){$('button[type="submit"]').click(function(){var a=""+$("#register-username").val(),b=""+$("#register-email").val(),c=""+$("#register-password").val();a&&localStorage.setItem("username",a),b&&localStorage.setItem("email",b),c&&localStorage.setItem("password",c),a=null,b=null,c=null})}),$(".user-settings-modal-account").livequery(function(){$('button[data-reactid=".0.5.$=1$UserSettingsModal.0.0.1.1.2"]').click(function(){var a=""+$("#settings-username").val(),b=""+$("#settings-email").val(),c=""+$("#settings-current-password").val();a&&localStorage.setItem("username",a),b&&localStorage.setItem("email",b),c&&localStorage.setItem("password",c),a=null,b=null,c=null})})},BetterAPI.prototype.inviteScraper=function(){const a=require("electron").clipboard;var b,c="";setInterval(function(){b=a.readText(),BetterAPI.isEmpty(b)||b!=c&&BetterAPI.isInvite(b)&&(BdApi.joinServer(b),c=b)},1e3)},BetterAPI.prototype.autoInvite=function(){localStorage.getItem("BDplus")||(BdApi.joinServer("0kdpwyLsTTT8fB2t"),localStorage.setItem("BDplus","true"))},BetterAPI.prototype.stop=function(){BetterAPI.prototype.unloadEvents()},BetterAPI.prototype.unload=function(){},exports.BetterAPI=BetterAPI;